[
    {
        "bookSourceComment": "建议登录\n整理修改缝合：酷安 Wolken\n灰色章节修复目录部分By叶落岚起+关耳/乃星改2021.8.3\n补丁 : 神秘人\n修复搜索问题\n修复发现榜单没图的问题\n修复章节内图片问题\n新補丁: 神秘人\n抓取源码中的关键字替换\n更新补丁\n更新补丁17/9\n2023.9.27\n新补丁：酷安 @吉王义昊\n重新抓取源码中的关键字替换\n2023.9.27\n新补丁2nd：酷安 @吉王义昊\n修复插图不能正常加载的问题\n2023.9.30\n酷安 @吉王义昊\n添加登录URL\n清理了无用代码\n使用更易读的变量名\n2023.10.1\n酷安 @吉王义昊\n重新抓取源码中的关键字替换\n2023.10.1\n酷安 @吉王义昊\n在获取正文时自动拉取源码并解密进行关键字替换，一劳永逸（大概）解决问题\n注意：此版本会使网络请求次数增加一倍，并一定程度上减慢加载速度\n2023.10.1\n酷安 @吉王义昊\n增加登录URL和登录UI\n启用CookieJar\n去除章节名下方的URL\n修正了下一页获取导致的正文加载错误\n补全发现中的文库\n修正部分小说目录获取错误的问题\n2023.10.4\n酷安 @吉王义昊\n跟进源码新的加密方式\n2023.10.5\n酷安 @吉王义昊\n跟进源码新的加密方式\n2023.10.6\n酷安 @吉王义昊\n跟进源站网站结构改动\n2023.10.7\n酷安 @吉王义昊\n改进了目录获取方式，现在能够处理更多意外情况\n2023.10.7\n酷安 @吉王义昊 @是樱椛不是樱花\n发现新增标签\n2023.10.9\n酷安 @吉王义昊\n改进了发现\n2023.10.13\n酷安 @吉王义昊\n跟进源站结构改动\n2023.10.15\n酷安 @吉王义昊\n修正部分小说目录获取错误的问题\n2023.10.22\n酷安 @吉王义昊\n发现页更改为动态获取，为大家带来更多排列组合（乐\n同样由于动态获取，现在可以查看标签对应的书籍数量了\n小幅优化正文的获取速度\n正文页可显示正确的章节名称（在加载对应正文页后目录里的错误名称会自动更正）\n2023.10.23\n酷安 @吉王义昊\n加载详情页后会自动更改错误的书名\n2023.10.25\n酷安 @吉王义昊\n发现页新增书架\n2023.11.7\n酷安 @吉王义昊\n使用Cache小幅度加快连续加载时正文的加载速度\n2023.11.11\n酷安 @吉王义昊\n解决了部分书籍目录最后一章获取链接错误的问题\n2023.11.12\n酷安 @吉王义昊\n移除了站长的喊话\n2023.11.14\n酷安 @吉王义昊\n修复了图片加载错误的问题\n2023.11.16\n酷安 @吉王义昊\n解决了部分书籍获取目录失败的问题",
        "bookSourceGroup": "轻小说",
        "bookSourceName": "哔哩轻小说🏷",
        "bookSourceType": 0,
        "bookSourceUrl": "https://w.linovelib.com",
        "bookUrlPattern": "",
        "concurrentRate": "",
        "coverDecodeJs": "",
        "customOrder": 0,
        "enabled": true,
        "enabledCookieJar": true,
        "enabledExplore": true,
        "exploreUrl": "@js:\nres = []\n\n//书架\nuser = java.ajax(\"https://w.linovelib.com/user.php\")\n//java.toast(user)\nif (user.match(/<title>登陆 - 哔哩轻小说<\\/title>/gi)) {\n  //未登录\n  res.push(\n    {\n      title: `>> 我的书架 | 未登录 <<`,\n      url: '',\n      style: { layout_flexGrow: 1, layout_flexBasisPercent: 1 }\n    })\n} else {\n  //已登录\n  res.push(\n    {\n      title: `>> 我的书架 | ${user.match(/<span class=\"user-name\">.+<\\/span>/gi)[0].replace(/<\\/?span.*?>/gi,'')} <<`,\n      url: '',\n      style: { layout_flexGrow: 1, layout_flexBasisPercent: 1 }\n    })\n  bookcase = java.ajax(\"https://w.linovelib.com/bookcase.php\")\n  bookcase.match(/<select[\\s\\S]+?<\\/select>/gi)[0].match(/<option.+<\\/option>/gi).forEach(option => {\n    res.push(\n      {\n        title: option.match(/>.+(?=<)/gi)[0].replace('>', ''),\n        url: \"https://w.linovelib.com/bookcase.php?classid=\" + option.match(/value=\\\".+?(?=\\\")/gi)[0].replace(/(value=\\\")/gi, ''),\n        style: { layout_flexGrow: 1, layout_flexBasisPercent: 0.25 }\n      })\n  })\n}\n\ncontent = java.ajax(\"https://w.linovelib.com/wenku/\")\ncontent.match(/排序方式[\\s\\S]+?<\\/div>/gi)[0].match(/<a.+<\\/a>/gi).forEach(a => {\n  let sortTitle = a.match(/>.+(?=<)/gi)[0].replace('>', '')\n  let sortAddress = a.match(/\\/.+?(?=_)/gi)[0].replace('/', '')\n  content.match(/作品分类[\\s\\S]+?<\\/div>/gi)[0].match(/<a.+<\\/a>/gi).forEach((v, i) => {\n    if (i == 0) {\n      res.push(\n        {\n          title: `>> 全部文库 | ${sortTitle} <<`,\n          url: v.match(/href=\\\".+?(?=\\\")/gi)[0].replace(/(href=\\\")/gi, '')\n            .replace(/\\/.+?(?=_)/gi, '/' + sortAddress).replace('1_0.html', '{{page}}_0.html'),\n          style: { layout_flexGrow: 1, layout_flexBasisPercent: 1 }\n        })\n    } else {\n      res.push(\n        {\n          title: v.match(/>.+(?=<)/gi)[0].replace('>', ''),\n          url: v.match(/href=\\\".+?(?=\\\")/gi)[0].replace(/(href=\\\")/gi, '')\n            .replace(/\\/.+?(?=_)/gi, '/' + sortAddress).replace('1_0.html', '{{page}}_0.html'),\n          style: { layout_flexGrow: 1, layout_flexBasisPercent: 0.25 }\n        })\n    }\n  })\n})\ncontent.match(/排序方式[\\s\\S]+?重置/gi)[0].match(/<li[\\s\\S]+?<\\/li>/gi).forEach(li => {\n  let sortTitle = li.match(/>.+(?=<\\/h3>)/gi)[0].replace('>', '')\n  res.push(\n    {\n      title: `>> ${sortTitle} <<`,\n      url: '',\n      style: { layout_flexGrow: 1, layout_flexBasisPercent: 1 }\n    })\n  li.match(/<a.+<\\/a>/gi).forEach((v, i) => {\n    if (i != 0) {\n      res.push(\n        {\n          title: v.match(/>.+(?=<)/gi)[0].replace('>', ''),\n          url: v.match(/href=\\\".+?(?=\\\")/gi)[0].replace(/(href=\\\")/gi, '').replace('1_0.html', '{{page}}_0.html'),\n          style: { layout_flexGrow: 1, layout_flexBasisPercent: 0.25 }\n        })\n    }\n  })\n})\ntagContent = java.ajax(\"https://w.linovelib.com/taglist/1.html\")\nres.push(\n  {\n    title: '>> 标签分类 <<',\n    url: '',\n    style: { layout_flexGrow: 1, layout_flexBasisPercent: 1 }\n  })\ntagContent.match(/标签分类<\\/h3>[\\s\\S]+?重置/gi)[0].match(/<a.+<\\/a>/gi).forEach((v, i) => {\n  res.push(\n    {\n      title: v.match(/>.+(?=<)/gi)[0].replace('>', ''),\n      url: v.match(/href=\\\".+?(?=\\\")/gi)[0].replace(/(href=\\\")/gi, '').replace('1.html', '{{page}}.html'),\n      style: { layout_flexGrow: 1, layout_flexBasisPercent: 0.25 }\n    })\n})\nJSON.stringify(res)",
        "header": "{\n\"Referer\":\"https://w.linovelib.com/\"\n}",
        "lastUpdateTime": 1700116165924,
        "loginUi": "[\n  {\n    \"name\": \"账号\",\n    \"type\": \"text\"\n  },\n  {\n    \"name\": \"密码\",\n    \"type\": \"password\"\n  }\n]",
        "loginUrl": "@js:\nfunction login() {\n  let une = source.getLoginInfoMap().get(\"账号\")\n  let pwd = source.getLoginInfoMap().get(\"密码\")\n  if (une && pwd) {\n    let body = String('username=' + une + '&password=' + pwd + '&usecookie=315360000&action=login')\n    let url = source.bookSourceUrl + '/login.php'\n    let ck = java.post(url, body, { \"Content-Type\": \"application/x-www-form-urlencoded\" }).cookies()\n    let header = JSON.stringify({\n      \"Cookie\": String(ck).match(/\\{(.*?)\\}/)[1].replace(/,/g, ';')\n    })\n    source.putLoginHeader(header)\n  }\n}",
        "respondTime": 180000,
        "ruleBookInfo": {
            "author": "[property=\"og:novel:author\"]@content",
            "canReName": "1",
            "coverUrl": "[property=\"og:image\"]@content",
            "intro": "id.bookSummary@tag.content@textNodes\n@js:\nresult=\"  \"+result;",
            "kind": "class.book-cell@tag.p.1@ownText&&class.tag-small red@text\n##.*万字|·.*",
            "lastChapter": "class.gray ell@text##(\\d+-\\d+-\\d+\\s\\d+:\\d+)·(.*)##$2 • $1",
            "name": "[property=\"og:novel:book_name\"]@content",
            "tocUrl": "class.btn-normal red@href",
            "wordCount": "class.book-cell@tag.p.1@ownText##连载|完结"
        },
        "ruleContent": {
            "content": "@js:\njava.setContent(src)\nif (java.get('jsContent') == '' || java.get('id') == '') {\n  jsLink = java.getString(\"tag.script@src\").match(/http.+zhmb.+\\?v.+/gi)\n  jsLink.forEach(link => {\n  \t  jsRaw = java.cacheFile(link)\n    jsContent = jsRaw.match(/.+\\\\x.+/gi)\n    if (jsContent) {\n      java.put('id', jsRaw.match(/contentid: '.+(?=',)/gi)[0].replace(\"contentid: '\", ''))\n      java.put('jsContent', jsContent[0])\n    }\n  \t})\n  //java.ajaxAll(jsLink).forEach(res => {\n  //  jsRaw = res.body()\n  //})\n}\nh = ''\nh = java.getString(\"id.\" + java.get('id') + \"@html\")\nh = h.replace(\"&nbsp;&nbsp;\", \"&emsp;\")\nel = { innerHTML: String(h) }\ndocument = { getElementById: () => { return el } }\nwindow = { document: document, RegExp: RegExp }\neval(String(java.get('jsContent')))\nh = el.innerHTML\nh",
            "imageDecode": "",
            "imageStyle": "FULL",
            "nextContentUrl": "##url_next:'([^']*)'##$1###\n@js:\n//121_2.html这样的是下一页，纯数字则是下一章\n//带有catalog是详情页\nvar isNew=/(\\/(\\d+).html)|catalog/.test(result);\nvar out=isNew?'':result;\nout",
            "replaceRegex": "##((?<=[\\u4e00-\\u9fa5“‘「（，])\\s+)?<!--\\s*\\（继续下一页\\）\\s*-->\\s*|((?<=[\\u4e00-\\u9fa5“‘「（，])\\s+)?\\（本章未完\\）\\s*|.+tmygod.+\\n",
            "title": "id.atitle@text"
        },
        "ruleExplore": {
            "author": "class.book-author@ownText",
            "bookList": "class.book-ol@tag.li",
            "bookUrl": "a@href",
            "coverUrl": "img@data-src",
            "intro": "class.book-desc@text&&class.ell@text",
            "kind": "class.tag-small-group origin-right@tag.em.0@text&&\nclass.tag-small-group origin-right@tag.em.1@text&&\ntag.time@text\n@js:\nres=[]\nresult.forEach(item=>{\n    item.split(new RegExp(\"[ \\/]\",\"gi\")).forEach(i=>res.push(i))\n})\nres",
            "name": "class.book-li@tag.img@alt",
            "wordCount": "class.tag-small blue@text"
        },
        "ruleReview": {},
        "ruleSearch": {
            "author": "class.book-author@textNodes",
            "bookList": "@js:\npath = 'class.book-ol book-ol-normal@tag.li';\nc=java.getElement(path);\nif( !c.length && result.includes('no-js')){\n  res = java.startBrowserAwait(baseUrl,'等待至跳转加载完成后重搜');\n  java.setContent(res.body());\n  c=java.getElement(path);\n}\nc",
            "bookUrl": "tag.a.0@href",
            "checkKeyWord": "我的青春恋爱喜剧",
            "coverUrl": "a@href@js:\nvar id = result.match(/\\/(\\d+)\\.html/)[1];\n'https://www.linovelib.com/files/article/image/'+parseInt(id/1000)+'/'+id+'/'+id+'s.jpg';",
            "intro": "class.book-desc@text",
            "kind": "class.tag-small-group origin-right@tag.em@text\n@js:\nres=[]\nresult.forEach(item=>{\n    item.split(new RegExp(\"[ \\/]\",\"gi\")).forEach(i=>res.push(i))\n})\nres",
            "name": "class.book-title-x@class.book-title@text"
        },
        "ruleToc": {
            "chapterList": "id.volumes @tag.li\n@js:\n    //现实debug(尝试修复正文链接问题，和目录不全)\n    //《好友角色的我怎么可能大受欢迎》第三卷12\n    //《我的青春恋爱喜剧》\n    //2022-8-19\n    //原来的代码在源注释（已移除）\n    //2022-8-20修复https://w.linovelib.com/novel/2765.html目录加载失败\n    //2023-9-30使用易于理解的变量命名\n    //2023-10-7处理cid(1)以及连续多个cid(0)\n    //2023-11-11解决了一个原来手滑写出的bug\n    //2023-11-16处理连续多个卷名\n\nres = result\n\nfor (i = 0; i < res.length; i++) {\n    java.setContent(res[i])\n    if (java.getString(\"tag.a@href\").match(/javascript:cid\\(.+\\)/gi)) {\n        //java.log(java.getString(\"tag.a@href\"))\n        if (String(res[(i == res.length - 1?i:i+1)]).match(/javascript:cid\\(.+\\)/gi)) {\n            java.setContent(res[i - 1])\n            prevLink = java.getString(\"tag.a@href\")\n            if (prevLink == \"\") {\n                java.setContent(res[i - 2])\n                prevLink = java.getString(\"tag.a@href\")\n            }\n            content = java.ajax(\"https://w.linovelib.com\" + prevLink)\n            java.setContent(content)\n            foot = java.getElements(\"id.footlink\")\n            path = prevLink\n\n            //java.log(foot)\n            while (String(foot).match(\"下一页\")) {\n            \t    //java.log(foot)\n                str = content.match(/<script type\\=\\\"text\\/javascript\\\">var ReadParams.*/)\n                path = String(str).match(/url_next\\:'.*?html/)[0].replace(\"url_next:'\", \"\")\n                content = java.ajax(\"https://w.linovelib.com\" + path)\n                java.setContent(content)\n                foot = java.getElements(\"id.footlink\")\n            }\n\n            next = java.ajax(\"https://w.linovelib.com\" + path)\n            str = next.match(/<script type\\=\\\"text\\/javascript\\\">var ReadParams.*/)\n            path = String(str).match(/url_next\\:'.*?html/)[0].replace(\"url_next:'\", \"\")\n            java.log('l:'+path)\n            res[i] = String(res[i]).replace(/javascript:cid\\(.+\\)/gi, path)\n        } else {\n            nextLink = \"\"\n            for (var j=1;nextLink==\"\";j++) {\n                java.setContent(res[i + j])\n                nextLink = java.getString(\"tag.a@href\")\n            }\n            next = java.ajax(\"https://w.linovelib.com\" + nextLink)\n            str = next.match(/<script type\\=\\\"text\\/javascript\\\">var ReadParams.*/)\n            path = String(str).match(/url_previous\\:'.*?html/)[0].replace(\"url_previous:'\", \"\")\n            java.log(path)\n\n            res[i] = String(res[i]).replace(/javascript:cid\\(.+\\)/gi, path)\n        }\n    }\n\n    //java.log(res[i])\n}\nres",
            "chapterName": "text",
            "chapterUrl": "tag.a@href",
            "isVolume": "@js:\njava.getString(\"tag.a@href\")==\"\"",
            "updateTime": ""
        },
        "searchUrl": "<js>\npage==1?\n'/search.html?searchkey={{key}}&searchtype=all'\n:\n'/search/{{key}}_{{page}}.html'\n</js>",
        "weight": 0
    },
    {
        "bookSourceComment": "建议登录\n整理修改缝合：酷安 Wolken\n灰色章节修复目录部分By叶落岚起+关耳/乃星改2021.8.3\n补丁 : 神秘人\n修复搜索问题\n修复发现榜单没图的问题\n修复章节内图片问题\n新補丁: 神秘人\n抓取源码中的关键字替换\n更新补丁\n更新补丁17/9\n2023.9.27\n新补丁：酷安 @吉王义昊\n重新抓取源码中的关键字替换\n2023.9.27\n新补丁2nd：酷安 @吉王义昊\n修复插图不能正常加载的问题\n2023.9.30\n酷安 @吉王义昊\n添加登录URL\n清理了无用代码\n使用更易读的变量名\n2023.10.1\n酷安 @吉王义昊\n重新抓取源码中的关键字替换\n2023.10.1\n酷安 @吉王义昊\n在获取正文时自动拉取源码并解密进行关键字替换，一劳永逸（大概）解决问题\n注意：此版本会使网络请求次数增加一倍，并一定程度上减慢加载速度\n2023.10.1\n酷安 @吉王义昊\n增加登录URL和登录UI\n启用CookieJar\n去除章节名下方的URL\n修正了下一页获取导致的正文加载错误\n补全发现中的文库\n修正部分小说目录获取错误的问题\n2023.10.4\n酷安 @吉王义昊\n跟进源码新的加密方式\n2023.10.5\n酷安 @吉王义昊\n跟进源码新的加密方式\n2023.10.6\n酷安 @吉王义昊\n跟进源站网站结构改动\n2023.10.7\n酷安 @吉王义昊\n改进了目录获取方式，现在能够处理更多意外情况\n2023.10.7\n酷安 @吉王义昊 @是樱椛不是樱花\n发现新增标签\n2023.10.9\n酷安 @吉王义昊\n改进了发现\n2023.10.13\n酷安 @吉王义昊\n跟进源站结构改动\n2023.10.15\n酷安 @吉王义昊\n修正部分小说目录获取错误的问题\n2023.10.22\n酷安 @吉王义昊\n发现页更改为动态获取，为大家带来更多排列组合（乐\n同样由于动态获取，现在可以查看标签对应的书籍数量了\n小幅优化正文的获取速度\n2023.10.22\n酷安 @吉王义昊\n为大家带来——台版哔哩轻小说！\n正文页可显示正确的章节名称（在加载对应正文页后目录里的错误名称会自动更正）\n2023.10.23\n酷安 @吉王义昊\n加载详情页后会自动更改错误的书名\n2023.10.25\n酷安 @吉王义昊\n发现页新增书架\n2023.11.11\n酷安 @吉王义昊\n解决了部分书籍目录最后一章获取链接错误的问题\n2023.11.14\n酷安 @吉王义昊\n修复了图片加载错误的问题\n2023.11.16\n酷安 @吉王义昊\n解决了部分书籍获取目录失败的问题",
        "bookSourceGroup": "轻小说,需要翻墙",
        "bookSourceName": "哔哩轻小说•台",
        "bookSourceType": 0,
        "bookSourceUrl": "https://tw.linovelib.com",
        "bookUrlPattern": "",
        "concurrentRate": "100",
        "coverDecodeJs": "",
        "customOrder": 0,
        "enabled": true,
        "enabledCookieJar": true,
        "enabledExplore": true,
        "exploreUrl": "@js:\nres = []\n//书架\nuser = java.t2s(java.ajax(\"https://tw.linovelib.com/user.php\"))\nif (user.match(/<title>登入 - 哔哩轻小说<\\/title>/gi)) {\n  //未登录\n  res.push(\n    {\n      title: `>> 我的书架 | 未登录 <<`,\n      url: '',\n      style: { layout_flexGrow: 1, layout_flexBasisPercent: 1 }\n    })\n} else {\n  //已登录\n  res.push(\n    {\n      title: `>> 我的书架 | ${user.match(/<span class=\"user-name\">.+<\\/span>/gi)[0].replace(/<\\/?span.*?>/gi,'')} <<`,\n      url: '',\n      style: { layout_flexGrow: 1, layout_flexBasisPercent: 1 }\n    })\n  bookcase = java.t2s(java.ajax(\"https://tw.linovelib.com/bookcase.php\"))\n  bookcase.match(/<select[\\s\\S]+?<\\/select>/gi)[0].match(/<option.+<\\/option>/gi).forEach(option => {\n    res.push(\n      {\n        title: option.match(/>.+(?=<)/gi)[0].replace('>', ''),\n        url: \"https://tw.linovelib.com/bookcase.php?classid=\" + option.match(/value=\\\".+?(?=\\\")/gi)[0].replace(/(value=\\\")/gi, ''),\n        style: { layout_flexGrow: 1, layout_flexBasisPercent: 0.25 }\n      })\n  })\n}\n\ncontent = java.t2s(java.ajax(\"https://tw.linovelib.com/wenku/\"))\ncontent.match(/排序方式[\\s\\S]+?<\\/div>/gi)[0].match(/<a.+<\\/a>/gi).forEach(a => {\n  let sortTitle = a.match(/>.+(?=<)/gi)[0].replace('>', '')\n  let sortAddress = a.match(/\\/.+?(?=_)/gi)[0].replace('/', '')\n  content.match(/作品分类[\\s\\S]+?<\\/div>/gi)[0].match(/<a.+<\\/a>/gi).forEach((v, i) => {\n    if (i == 0) {\n      res.push(\n        {\n          title: `>> 全部文库 | ${sortTitle} <<`,\n          url: v.match(/href=\\\".+?(?=\\\")/gi)[0].replace(/(href=\\\")/gi, '')\n            .replace(/\\/.+?(?=_)/gi, '/' + sortAddress).replace('1_0.html', '{{page}}_0.html'),\n          style: { layout_flexGrow: 1, layout_flexBasisPercent: 1 }\n        })\n    } else {\n      res.push(\n        {\n          title: v.match(/>.+(?=<)/gi)[0].replace('>', ''),\n          url: v.match(/href=\\\".+?(?=\\\")/gi)[0].replace(/(href=\\\")/gi, '')\n            .replace(/\\/.+?(?=_)/gi, '/' + sortAddress).replace('1_0.html', '{{page}}_0.html'),\n          style: { layout_flexGrow: 1, layout_flexBasisPercent: 0.25 }\n        })\n    }\n  })\n})\ncontent.match(/排序方式[\\s\\S]+?重置/gi)[0].match(/<li[\\s\\S]+?<\\/li>/gi).forEach(li => {\n  let sortTitle = li.match(/>.+(?=<\\/h3>)/gi)[0].replace('>', '')\n  res.push(\n    {\n      title: `>> ${sortTitle} <<`,\n      url: '',\n      style: { layout_flexGrow: 1, layout_flexBasisPercent: 1 }\n    })\n  li.match(/<a.+<\\/a>/gi).forEach((v, i) => {\n    if (i != 0) {\n      res.push(\n        {\n          title: v.match(/>.+(?=<)/gi)[0].replace('>', ''),\n          url: v.match(/href=\\\".+?(?=\\\")/gi)[0].replace(/(href=\\\")/gi, '').replace('1_0.html', '{{page}}_0.html'),\n          style: { layout_flexGrow: 1, layout_flexBasisPercent: 0.25 }\n        })\n    }\n  })\n})\ntagContent = java.t2s(java.ajax(\"https://tw.linovelib.com/taglist/1.html\"))\nres.push(\n  {\n    title: '>> 标签分类 <<',\n    url: '',\n    style: { layout_flexGrow: 1, layout_flexBasisPercent: 1 }\n  })\ntagContent.match(/标签分类<\\/h3>[\\s\\S]+?重置/gi)[0].match(/<a.+<\\/a>/gi).forEach((v, i) => {\n  res.push(\n    {\n      title: v.match(/>.+(?=<)/gi)[0].replace('>', ''),\n      url: v.match(/href=\\\".+?(?=\\\")/gi)[0].replace(/(href=\\\")/gi, '').replace('1.html', '{{page}}.html'),\n      style: { layout_flexGrow: 1, layout_flexBasisPercent: 0.25 }\n    })\n})\nJSON.stringify(res)",
        "header": "{\n\"Referer\":\"https://w.linovelib.com/\"\n}",
        "jsLib": "",
        "lastUpdateTime": 1700116196482,
        "loginUi": "[\n  {\n    \"name\": \"账号\",\n    \"type\": \"text\"\n  },\n  {\n    \"name\": \"密码\",\n    \"type\": \"password\"\n  }\n]",
        "loginUrl": "@js:\nfunction login() {\n  let une = source.getLoginInfoMap().get(\"账号\")\n  let pwd = source.getLoginInfoMap().get(\"密码\")\n  if (une && pwd) {\n    let body = String('username=' + une + '&password=' + pwd + '&usecookie=315360000&action=login&submit=')\n    let url = 'https://tw.linovelib.com/login.php'\n    let ck = java.post(url, body, { \"Content-Type\": \"application/x-www-form-urlencoded\" }).cookies()\n    let header = JSON.stringify({\n      \"Cookie\": String(ck).match(/\\{(.*?)\\}/)[1].replace(/,/g, ';')\n    })\n    source.putLoginHeader(header)\n  }\n}",
        "respondTime": 180000,
        "ruleBookInfo": {
            "author": "[property=\"og:novel:author\"]@content\n@js:\njava.t2s(result)",
            "canReName": "1",
            "coverUrl": "[property=\"og:image\"]@content",
            "intro": "id.bookSummary@tag.content@textNodes\n@js:\nresult=\"  \"+result;\njava.t2s(result)",
            "kind": "class.book-cell@tag.p.1@ownText&&class.tag-small red@text\n##.*萬字|·.*\n@js:\nres=[]\nresult.forEach(item=>res.push(java.t2s(item)))\nres",
            "lastChapter": "class.gray ell@text##(\\d+-\\d+-\\d+\\s\\d+:\\d+)·(.*)##$2 • $1\n@js:\njava.t2s(result)",
            "name": "[property=\"og:novel:book_name\"]@content\n@js:\njava.t2s(result)",
            "tocUrl": "class.btn-normal red@href",
            "wordCount": "class.book-cell@tag.p.1@ownText##連載|完結\n@js:\njava.t2s(result)"
        },
        "ruleContent": {
            "content": "id.acontent1@html\n@js:\njava.t2s(result.replace(/img1.readpai.com/gi,'img3.readpai.com'))",
            "imageDecode": "",
            "imageStyle": "FULL",
            "nextContentUrl": "##url_next:'([^']*)'##$1###\n@js:\n//121_2.html这样的是下一页，纯数字则是下一章\n//带有catalog是详情页\nvar isNew=/(\\/(\\d+).html)|catalog/.test(result);\nvar out=isNew?'':result;\nout",
            "replaceRegex": "##((?<=[\\u4e00-\\u9fa5“‘「（，])\\s+)?<!--\\s*\\（继续下一页\\）\\s*-->\\s*|((?<=[\\u4e00-\\u9fa5“‘「（，])\\s+)?\\（本章未完\\）\\s*|",
            "title": "id.atitle@text\n@js:\njava.t2s(result)"
        },
        "ruleExplore": {
            "author": "class.book-author@ownText\n@js:\njava.t2s(result)",
            "bookList": "class.book-ol@tag.li",
            "bookUrl": "a@href",
            "coverUrl": "img@data-src",
            "intro": "class.book-desc@text&&class.ell@text\n@js:\njava.t2s(result)",
            "kind": "class.tag-small-group origin-right@tag.em.0@text&&\nclass.tag-small-group origin-right@tag.em.1@text&&\ntag.time@text\n@js:\nres=[]\nresult.forEach(item=>{\n    item.split(new RegExp(\"[ \\/]\",\"gi\")).forEach(i=>res.push(java.t2s(i)))\n})\nres",
            "name": "class.book-li@tag.img@alt\n@js:\njava.t2s(result)",
            "wordCount": "class.tag-small blue@text\n@js:\njava.t2s(result)"
        },
        "ruleReview": {},
        "ruleSearch": {
            "author": "",
            "bookList": "class.gsc-expansionArea@class.gsc-webResult gsc-result\n@js:\nres=[]\nresult.forEach(item=>{\n  java.setContent(item)\n  if (String(java.getString(\"class.gs-title.0@tag.a.0@href\")).match(/novel\\/\\d+\\.html/gi)) {\n    res.push(item)\n  }\n})\nres",
            "bookUrl": "tag.a.0@href",
            "checkKeyWord": "我的青春恋爱喜剧",
            "coverUrl": "a@href@js:\nvar id = result.match(/\\/(\\d+)\\.html/)[1];\n'https://www.linovelib.com/files/article/image/'+parseInt(id/1000)+'/'+id+'/'+id+'s.jpg';",
            "intro": "class.gs-bidi-start-align gs-snippet@text\n@js:\njava.t2s(result)",
            "kind": "",
            "name": "class.gs-title.0@tag.a.0@text##線上看\\|epub,txt下載_嗶哩輕小說\n@js:\njava.t2s(result)"
        },
        "ruleToc": {
            "chapterList": "id.volumes @tag.li\n@js:\n    //现实debug(尝试修复正文链接问题，和目录不全)\n    //《好友角色的我怎么可能大受欢迎》第三卷12\n    //《我的青春恋爱喜剧》\n    //2022-8-19\n    //原来的代码在源注释（已移除）\n    //2022-8-20修复https://w.linovelib.com/novel/2765.html目录加载失败\n    //2023-9-30使用易于理解的变量命名\n    //2023-10-7处理cid(1)以及连续多个cid(0)\n    //2023-11-11解决了一个原来手滑写出的bug\n    //2023-11-16处理连续多个卷名\n\nres = result\n\nfor (i = 0; i < res.length; i++) {\n    java.setContent(res[i])\n    if (java.getString(\"tag.a@href\").match(/javascript:cid\\(.+\\)/gi)) {\n        //java.log(java.getString(\"tag.a@href\"))\n        if (String(res[(i == res.length - 1?i:i+1)]).match(/javascript:cid\\(.+\\)/gi)) {\n            java.setContent(res[i - 1])\n            prevLink = java.getString(\"tag.a@href\")\n            if (prevLink == \"\") {\n                java.setContent(res[i - 2])\n                prevLink = java.getString(\"tag.a@href\")\n            }\n            content = java.ajax(\"https://w.linovelib.com\" + prevLink)\n            java.setContent(content)\n            foot = java.getElements(\"id.footlink\")\n            path = prevLink\n\n            //java.log(foot)\n            while (String(foot).match(\"下一页\")) {\n            \t    //java.log(foot)\n                str = content.match(/<script type\\=\\\"text\\/javascript\\\">var ReadParams.*/)\n                path = String(str).match(/url_next\\:'.*?html/)[0].replace(\"url_next:'\", \"\")\n                content = java.ajax(\"https://w.linovelib.com\" + path)\n                java.setContent(content)\n                foot = java.getElements(\"id.footlink\")\n            }\n\n            next = java.ajax(\"https://w.linovelib.com\" + path)\n            str = next.match(/<script type\\=\\\"text\\/javascript\\\">var ReadParams.*/)\n            path = String(str).match(/url_next\\:'.*?html/)[0].replace(\"url_next:'\", \"\")\n            java.log('l:'+path)\n            res[i] = String(res[i]).replace(/javascript:cid\\(.+\\)/gi, path)\n        } else {\n            nextLink = \"\"\n            for (var j=1;nextLink==\"\";j++) {\n                java.setContent(res[i + j])\n                nextLink = java.getString(\"tag.a@href\")\n            }\n            next = java.ajax(\"https://w.linovelib.com\" + nextLink)\n            str = next.match(/<script type\\=\\\"text\\/javascript\\\">var ReadParams.*/)\n            path = String(str).match(/url_previous\\:'.*?html/)[0].replace(\"url_previous:'\", \"\")\n            java.log(path)\n\n            res[i] = String(res[i]).replace(/javascript:cid\\(.+\\)/gi, path)\n        }\n    }\n\n    //java.log(res[i])\n}\nres",
            "chapterName": "text\n@js:\njava.t2s(result)",
            "chapterUrl": "tag.a@href",
            "isVolume": "@js:\njava.getString(\"tag.a@href\")==\"\"",
            "updateTime": ""
        },
        "searchUrl": "https://cse.google.com.hk/cse?cx=649de34f5e63448cb#gsc.tab=0&gsc.q={{key}}&gsc.sort=&gsc.page={{page}},{webView:true}",
        "weight": 0
    }
]
